---           
layout: post
title: NRapid, cascade filtering with autocompletes
date: 2012-11-28 15:12:54 UTC
updated: 2012-11-28 15:12:54 UTC
comments: false
categories: How To NRapid
---
<br /><div class="MsoNormal"><span lang="EN-US">When working with large sets of hierarchical data sometimes you need to provide some sort a cascade filter mechanism. For instance, in a travel agency system, you may want to be able to select a destination, like country or a region, and based on that selection, get some data sets with travel options such as hotel deals, car rentals, and so on….<o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">Continuing with our example (products and categories) I’ll create a dialog with two autocompletes. One will give you whole list of categories and the other a filtered set of products based on the selected category. <o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">Doing this is not so hard but requires a bit of an explanation. <o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US">*In this post I’ll be using a nice C#’s feature called partial application. If you don’t know what does this means, don’t worry; just look at it as a magical lambda ;).</span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">When configuring an Autocomplete it’s possible to specify a function to be executed every time the selection changes, this can be done by using the NRapid’s fluent API, and we are going to use this feature to get the selected category and then use that category to filter the list of products.<o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">The code looks something like this:<o:p></o:p></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-oHwIO5XmJk4/UASRwRzYtPI/AAAAAAAAAL8/VevG-rJF8Iw/s1600/report-class.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-oHwIO5XmJk4/UASRwRzYtPI/AAAAAAAAAL8/VevG-rJF8Iw/s1600/report-class.png" /></a></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: left;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="MsoNormal"><span lang="EN-US">* If you are not familiar with functional programming this code will look a little odd,....and well..., it is ;)<o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">This code updates the "cat" variable every time the selected category changes and passes it to the method productsByCategory which is wrapped into a function that is partial applied and used as a datasource for the products autocomplete control. This function is invoked internally by the report engine and updates the products list with the proper values. In other words, a whole lot of mess ;)<o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">Execute the report and you will see the two autocomplete controls working together to provide cascade filtering .<o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-mdPsEejNELI/UASTv7NWJAI/AAAAAAAAAME/FaFRMtMY7iE/s1600/selection-cat.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-mdPsEejNELI/UASTv7NWJAI/AAAAAAAAAME/FaFRMtMY7iE/s1600/selection-cat.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-g4VMbarOiII/UASTwi3e3QI/AAAAAAAAAMM/FGFR1URTNTs/s1600/selections-prod.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-g4VMbarOiII/UASTwi3e3QI/AAAAAAAAAMM/FGFR1URTNTs/s1600/selections-prod.png" /></a></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">As soon as I can, I'll take a look at the NRapid core API and see if it's possible to reduce the ammount of code you need to write in order to get cascade filtering.</span></div><div class="MsoNormal"><br /></div><br /><div class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><span style="background-color: white;"><span style="background-color: white;">You can get the source code of NRapid from&nbsp;</span><a href="https://xp-dev.com/svn/NRapid/" style="background-color: white;" target="_blank">here</a></span></span></div><div class="MsoNormal"><span lang="EN-US"><span style="background-color: white;"><span lang="EN-US"><span lang="EN-US">And the sample app from&nbsp;<a href="https://xp-dev.com/svn/nrapid-reports-learn/" target="_blank">here</a></span></span></span></span></div><div class="MsoNormal"><span lang="EN-US"><span style="background-color: white;"><span lang="EN-US"><span lang="EN-US">The Northwind database is available from download at&nbsp;<a href="http://www.microsoft.com/en-us/download/details.aspx?id=23654" target="_blank">http://www.microsoft.com/en-us/download/details.aspx?id=23654</a></span></span></span></span></div><br /><div class="MsoNormal"><span lang="EN-US"><br /></span></div>