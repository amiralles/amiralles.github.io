---           
layout: post
title: Loading large html pages using Awesomium.NET
date: 2013-01-23 14:04:24 UTC
updated: 2013-01-23 14:04:24 UTC
comments: false
categories: Awesomium.NET C#
---
<br /><div class="MsoNormal"><span lang="EN-US">While there is no limitation in the page size per se, you may experience some weird behavior (errors) when trying to load large html files using the Awesomium WebView LoadHTML method.<o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">I been using this framework for a week now and I’m more than satisfied, it’s a great piece of software, but the error message you get when a large page fails to load, it is a bit confusing <b>“the uri is too long”</b>…. <o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">I was working with two files, one of them was large, the other was small, but URL length was the same for both, let say <b>foo.html</b> and <b>bar.html</b>. When I load foo.html things work great, but when I try to load bar.html, boom, I got an error saying that something is wrong with URI’s length? here is where I went “WTF, both URIs have the same length!” ;) <o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US"><span style="background-color: yellow;">The thing is that the framework internally is using the .NET Uri class which have a limitation of 65K something characters,<b> if the html that you are trying to load exceeds that limitation (not the url, the html) you will get that exception</b></span><b>. </b><o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">Fortunately there is a workaround that works like a charm. Instead of using LoadHTML, you have to make a local copy of the html page and use that copy to set the datasource property on the web view, by doing this, the problem gets fixed :). <o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">The code may look something like this:<o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">Configuring the datasource property</span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-ntieCUiduA0/UP_rinM4TmI/AAAAAAAAAfE/1s0k9VsKpuY/s1600/config-data-src.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-ntieCUiduA0/UP_rinM4TmI/AAAAAAAAAfE/1s0k9VsKpuY/s1600/config-data-src.png" /></a></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US">Loading the html</span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-1sEoU0bhxH4/UP_rxXecXZI/AAAAAAAAAfM/Ffc_txAzL6E/s1600/asset.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-1sEoU0bhxH4/UP_rxXecXZI/AAAAAAAAAfM/Ffc_txAzL6E/s1600/asset.png" /></a></div><div class="MsoNormal"><span lang="EN-US"><b><br /></b></span></div><div class="MsoNormal"><span lang="EN-US">In this post I'm using Awesomium 1.7 RC3, keep in mind that the code above may not work on previous versions.<o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US"><span lang="EN-US" style="font-family: &quot;Calibri&quot;,&quot;sans-serif&quot;; font-size: 11.0pt; line-height: 107%; mso-ansi-language: EN-US; mso-ascii-theme-font: minor-latin; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-bidi-language: AR-SA; mso-bidi-theme-font: minor-bidi; mso-fareast-font-family: Calibri; mso-fareast-language: EN-US; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin;">PS: You can see a full explanation of this behavior at the official Awesomium website on this thread &nbsp;<a href="http://support.awesomium.com/discussions/problems/1027-load-html-in-17-rc2#comment_18672077" target="_blank">http://support.awesomium.com/discussions/problems/1027-load-html-in-17-rc2#comment_18672077</a></span></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div><div class="MsoNormal"><span lang="EN-US"><br /></span></div>